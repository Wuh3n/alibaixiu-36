# 登录功能

在public/admin/login.html文件开始写代码

![1566790053333](assets/1566790053333.png)

需要对表单数据进行验证  只有验证通过了 才发送ajax 

```html
 <!-- 引入jquery.min.js文件 -->
  <script src="../assets/vendors/jquery/jquery.min.js"></script>
  <script>
    $('button').on('click', function () {
      // 需要对表单数据进行验证  只有验证通过了 才发送ajax 
      var email = $('#email').val().trim().replace(/\s/g, '');
      var pwd = $('#password').val().trim().replace(/\s/g, '');

      // 先对邮件进行验证 
      var regEmail = /\w+[@]\w+[.]\w+/;

      if (!regEmail.test(email)) {
        // 提示
        $('.alert').fadeIn(1000).delay(1000).fadeOut(1000);
        $('#msg').text('邮件地址不合法，请重新填写');
        return;
      }

      var pwdEmail = /\w{4,20}/;

      if (!pwdEmail.test(pwd)) {
        // 提示
        $('.alert').fadeIn(1000).delay(1000).fadeOut(1000);
        $('#msg').text('密码不合法，请重新填写');
        return;
      }

      $.ajax({
        type: 'post',
        url: '/login',
        data: {
          email: email,
          password: pwd
        },
        success: function (res) {
          // 用户名和密码输入正确 跳转到网站后台首页
          location.href = "index.html";
        },
        error: function () {
          $('.alert').fadeIn(1000).delay(1000).fadeOut(1000);
          $('#msg').text('邮箱地址或者密码输入错误，请重新输入');
        }
      });
    });

  </script>
```

# 登录拦截

思路：

- 使用script标签加载服务器端提供的接口地址
- 判断isLogin变量的值，如果值为false，跳转到登录页面

```html
<script src="/login/status"></script>
<script>
  // console.log(isLogin);
  if (!isLogin) {
    location.href = "login.html";
  }
</script>
```

